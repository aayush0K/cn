import java.util.*;
class Frame {
int seqNum;
boolean acknowledged;
Frame(int seqNum) {
this.seqNum = seqNum;
this.acknowledged = false;
}
}
class Sender {
int windowSize;
int nextSeqNum;
List<Frame> window;
public Sender(int windowSize) {
this.windowSize = windowSize;
this.nextSeqNum = 0;
this.window = new ArrayList<>();
}
public void sendFrames() {
System.out.println("Sending frames in the current window:");
for (int i = 0; i < windowSize; i++) {
Frame frame = new Frame(nextSeqNum++);
window.add(frame);
System.out.println("Sending frame with sequence number: " +
frame.seqNum);
}

}
public void receiveAck(int ackSeqNum) {
System.out.println("Received acknowledgment for frame: " + ackSeqNum);
// Mark the frame as acknowledged
window.removeIf(f -> f.seqNum <= ackSeqNum);
}
public void resendFrames() {
System.out.println("Resending frames:");
for (Frame frame : window) {
System.out.println("Resending frame with sequence number: " +
frame.seqNum);
}
}
}
class Receiver {
int expectedSeqNum;
public Receiver() {
this.expectedSeqNum = 0;
}
public void receiveFrames(List<Frame> frames) {
for (Frame frame : frames) {
if (frame.seqNum == expectedSeqNum) {
System.out.println("Received frame with sequence number: " +

frame.seqNum);

expectedSeqNum++;
} else {
System.out.println("Frame out of order: " + frame.seqNum);
break;
}
}

}
public int sendAck() {
System.out.println("Sending acknowledgment for sequence number: " +
(expectedSeqNum - 1));
return expectedSeqNum - 1;
}
}
public class SlidingWindowProtocol {
public static void main(String[] args) {
Sender sender = new Sender(4); // Window size 4
Receiver receiver = new Receiver();
// Simulate sending frames
sender.sendFrames();
// Simulate receiving and acknowledging frames
List<Frame> receivedFrames = new ArrayList<>(sender.window);
receiver.receiveFrames(receivedFrames);
int ackSeqNum = receiver.sendAck();
// Sender receives acknowledgment and updates the window
sender.receiveAck(ackSeqNum);
// Simulate loss and resend
System.out.println("Simulating frame loss, resending unacknowledged
frames...");
sender.resendFrames();
}
}